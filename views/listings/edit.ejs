<% layout("/layouts/boilerplates.ejs") %>

    <div class="row" >
      <div class="col-8 offset-2">

        <h3>Edit the listing:</h3>
        <form method="POST" action="/listings/<%=listing._id%>?_method=PUT" class="needs-validation" enctype="multipart/form-data" novalidate> 
            <div class="mb-3">
              <label for="newlisting[title]" class="form-label">Title:</label>
              <input id="newlisting[title]" name="newlisting[title]" 
              type="text" class="form-control"
              value="<%=listing.title%>">
              <div class="valid-feedback">
                Looks good!!
              </div>
               
            </div>
            <div class="mb-3">
              <label for="newlisting[description]" class="form-label">Description:</label><br>
              <textarea id="newlisting[description]" name="newlisting[description]" 
              type="text" class="form-control" required><%=listing.description%></textarea>
              <div class="invalid-feedback">
                Add a description
              </div>
            </div>
            <div class="mb-3">
              Original Image<br>
              <img style="width: 250px;height: 100%;
              object-fit: cover;" 
              src="<%=originalUrl%>" alt="listing-image"/>
            </div>
            <div class="mb-3">
              <label for="newlisting[image]" class="form-label">Upload New Img:</label>
              <input id="newlisting[image]" name="newlisting[image]" 
              type="file" class="form-control"
              value="<%=listing.image.url%>">
            </div>
            <div class="mb-3">
              <label for="newlisting[price]" class="form-label">Price:</label>
              <input id="newlisting[price]" name="newlisting[price]" 
              type="number" class="form-control"
              value="<%=listing.price%>" min="0" required>
              <div class="invalid-feedback">
                Invalid price
              </div>
            </div>
            <div class="mb-3">
              <label for="newlisting[location]" class="form-label">Location:</label>
              <input id="newlisting[location]" name="newlisting[location]" 
              type="text" class="form-control"
              value="<%=listing.location%>" required>
              <div class="invalid-feedback">
                Invalid location
              </div>
            </div>
            <div class="mb-3">
              <label for="newlisting[country]" class="form-label">Country:</label>
              <input id="newlisting[country]" name="newlisting[country]" 
              type="text" class="form-control"
              value="<%=listing.country%>" required>
              <div class="invalid-feedback">
                Invalid country name
              </div>
            </div>
            <button class="btn button-design">Save</button>
        </form>    
      </div>
    </div>
